<!DOCTYPE html>
<html>
<head>
    <title>Fractal Generator</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: #1a1a1a;
            color: #fff;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            max-width: 1200px;
            width: 100%;
            background: #2d2d2d;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.3);
        }

        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        select, input, button {
            background: #3d3d3d;
            color: #fff;
            border: 1px solid #555;
            padding: 8px 12px;
            border-radius: 5px;
            width: 100%;
            margin: 5px 0;
        }

        button {
            background: #4CAF50;
            border: none;
            cursor: pointer;
            transition: background 0.3s;
        }

        button:hover {
            background: #45a049;
        }

        #saveBtn {
            background: #2196F3;
        }

        #saveBtn:hover {
            background: #1976D2;
        }

        canvas {
            border: 2px solid #555;
            border-radius: 5px;
            max-width: 100%;
            height: auto;
            background: #000;
        }

        .label {
            font-size: 14px;
            margin-bottom: 5px;
            color: #ddd;
        }

        .progress {
            width: 100%;
            height: 20px;
            background: #3d3d3d;
            border-radius: 10px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-bar {
            width: 0%;
            height: 100%;
            background: #4CAF50;
            transition: width 0.3s;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Fractal Generator</h1>
        <div class="controls">
            <div>
                <div class="label">Fractal Type:</div>
                <select id="fractalType">
                    <option value="mandelbrot">Mandelbrot Set</option>
                    <option value="julia">Julia Set</option>
                    <option value="burningShip">Burning Ship</option>
                    <option value="multibrot">Multibrot</option>
                    <option value="cubicMandelbrot">Cubic Mandelbrot</option>
                    <option value="cubicJulia">Cubic Julia</option>
                   
                </select>
            </div>
            <div>
                <div class="label">Color Scheme:</div>
                <select id="colorScheme">
                    <option value="rainbow">Rainbow</option>
                    <option value="blue">Blue</option>
                    <option value="greyscale">Greyscale</option>
                    <option value="sunset">Sunset</option>
                    <option value="ocean">Ocean</option>
                    <option value="forest">Forest</option>
                    <option value="fire">Fire</option>
                    <option value="earth">Earth</option>
                    <option value="pastel">Pastel</option>
                    <option value="electric">Electric</option>
                </select>
            </div>
            <div>
                <div class="label">Max Iterations:</div>
                <input type="number" id="maxIterations" value="100" min="1" max="1000">
            </div>
            <div>
                <div class="label">Zoom:</div>
                <input type="number" id="zoom" value="1" min="0.1" max="10" step="0.1">
            </div>
        </div>
        <button id="generateBtn">Generate Fractal</button>
        <button id="saveBtn">Save Image</button>
        <div class="progress">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <canvas id="fractalCanvas" width="800" height="600"></canvas>
    </div>

    <script>
        const canvas = document.getElementById('fractalCanvas');
        const ctx = canvas.getContext('2d');
        const progressBar = document.getElementById('progressBar');

        // Color scheme palettes
        const colorSchemes = {
            rainbow: (t) => hsl(${t * 360}, 100%, 50%),
            blue: (t) => rgb(0, 0, ${Math.floor(t * 255)}),
            greyscale: (t) => {
                const v = Math.floor(t * 255);
                return rgb(${v}, ${v}, ${v});
            },
            sunset: (t) => rgb(${Math.floor(255 * t)}, ${Math.floor(100 * t)}, ${Math.floor(50 + 100 * t)}),
            ocean: (t) => rgb(${Math.floor(50 * t)}, ${Math.floor(100 + 155 * t)}, ${Math.floor(150 + 105 * t)}),
            forest: (t) => rgb(${Math.floor(50 * t)}, ${Math.floor(100 + 155 * t)}, ${Math.floor(50 * t)}),
            fire: (t) => rgb(${Math.floor(200 + 55 * t)}, ${Math.floor(100 * t)}, 0),
            earth: (t) => rgb(${Math.floor(139 * t)}, ${Math.floor(69 * t)}, ${Math.floor(19 * t)}),
            pastel: (t) => hsl(${t * 360}, 70%, 80%),
            electric: (t) => rgb(${Math.floor(200 * t)}, ${Math.floor(200 + 55 * Math.sin(t * Math.PI))}, ${Math.floor(255 * Math.cos(t * Math.PI))})
        };

        function mandelbrot(x0, y0, maxIter) {
            let x = 0, y = 0;
            let iter = 0;
            while (x * x + y * y < 4 && iter < maxIter) {
                const xtemp = x * x - y * y + x0;
                y = 2 * x * y + y0;
                x = xtemp;
                iter++;
            }
            return iter;
        }

        function julia(x0, y0, maxIter) {
            let x = x0, y = y0;
            const cx = -0.4, cy = 0.6;
            let iter = 0;
            while (x * x + y * y < 4 && iter < maxIter) {
                const xtemp = x * x - y * y + cx;
                y = 2 * x * y + cy;
                x = xtemp;
                iter++;
            }
            return iter;
        }

        function burningShip(x0, y0, maxIter) {
            let x = 0, y = 0;
            let iter = 0;
            while (x * x + y * y < 4 && iter < maxIter) {
                const xtemp = x * x - y * y + x0;
                y = Math.abs(2 * x * y) + y0;
                x = xtemp;
                iter++;
            }
            return iter;
        }

        function multibrot(x0, y0, maxIter) {
            let x = 0, y = 0;
            let iter = 0;
            const power = 3;
            while (x * x + y * y < 4 && iter < maxIter) {
                const r = Math.sqrt(x * x + y * y);
                const theta = Math.atan2(y, x);
                const xtemp = Math.pow(r, power) * Math.cos(power * theta) + x0;
                y = Math.pow(r, power) * Math.sin(power * theta) + y0;
                x = xtemp;
                iter++;
            }
            return iter;
        }

        function drawFractal() {
            const maxIter = parseInt(document.getElementById('maxIterations').value);
            const fractalType = document.getElementById('fractalType').value;
            const colorScheme = document.getElementById('colorScheme').value;
            const zoom = parseFloat(document.getElementById('zoom').value);

            const imageData = ctx.createImageData(canvas.width, canvas.height);
            const data = imageData.data;

            let fractalFunc;
            switch(fractalType) {
                case 'mandelbrot':
                    fractalFunc = mandelbrot;
                    break;
                case 'julia':
                    fractalFunc = julia;
                    break;
                case 'burningShip':
                    fractalFunc = burningShip;
                    break;
                case 'multibrot':
                    fractalFunc = multibrot;
                    break;
                default:
                    fractalFunc = mandelbrot;
            }

            const colorFunc = colorSchemes[colorScheme];

            for (let y = 0; y < canvas.height; y++) {
                // Update progress bar
                progressBar.style.width = ${(y / canvas.height) * 100}%;

                for (let x = 0; x < canvas.width; x++) {
                    const x0 = (x - canvas.width/2) / (zoom * canvas.width/4);
                    const y0 = (y - canvas.height/2) / (zoom * canvas.height/4);

                    const iter = fractalFunc(x0, y0, maxIter);
                    const t = iter === maxIter ? 0 : iter / maxIter;

                    const color = colorFunc(t);
                    const match = color.match(/\d+/g).map(Number);
                    
                    const pixelIndex = (y * canvas.width + x) * 4;
                    data[pixelIndex] = match[0];     // R
                    data[pixelIndex + 1] = match[1]; // G
                    data[pixelIndex + 2] = match[2]; // B
                    data[pixelIndex + 3] = 255;      // A
                }
            }

            ctx.putImageData(imageData, 0, 0);
            progressBar.style.width = '100%';
        }

        document.getElementById('generateBtn').addEventListener('click', drawFractal);

        document.getElementById('saveBtn').addEventListener('click', () => {
            const link = document.createElement('a');
            link.download = 'fractal.png';
            link.href = canvas.toDataURL();
            link.click();
        });

        // Initial draw
        drawFractal();
    </script>
</body>
</html>
